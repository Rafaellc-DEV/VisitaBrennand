<!DOCTYPE html>
<html th:replace="~{admin/base :: layout('Avisos de Funcionamento', ~{::section})}" xmlns:th="http://www.thymeleaf.org">
<section>
    <style>
        .content-area { display: flex; justify-content: center; align-items: center; flex-direction: column; padding: 1rem; }
        .content-area h2 { font-weight: 800; font-size: 2rem; color: var(--ink); text-align: center; margin-bottom: 2rem; }
        .form-card {
            background: var(--surface); border: 1px solid var(--line); border-radius: 18px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.08); max-width: 700px; width: 100%; padding: 2.5rem 2rem;
        }
        .form-label { font-weight: 600; color: var(--muted); margin-bottom: 6px; display: block; }
        .form-control, .form-select {
            border-radius: 10px; border: 1px solid var(--line); padding: 12px;
            font-size: 15px; color: var(--ink); background: var(--surface);
        }
        .form-control:focus, .form-select:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(41,74,93,0.15); }
        textarea.form-control { resize: none; min-height: 100px; }
        .btn-confirm {
            display: inline-block; width: 100%; background: var(--ink); color: white;
            font-weight: 600; border: none; border-radius: 10px; padding: 12px;
            font-size: 1rem; transition: all 0.2s ease; margin-top: 1.5rem;
        }
        .btn-confirm:hover { background: #2d3748; }
        .form-icon { position: relative; }
        .form-icon i { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--muted); font-size: 18px; }
        .form-icon input { padding-left: 40px; }
        .alert-success { max-width: 700px; width: 100%; margin-bottom: 1rem; }
    </style>

    <div class="content-area">
        <div th:if="${success}" class="alert alert-success" role="alert" th:text="${success}"></div>

        <h2>Avisos de funcionamento</h2>
        <div class="form-card">
            <form method="post" th:action="@{/admin/avisos/salvar}" th:object="${aviso}">
                <input type="hidden" th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <div class="mb-3 form-icon">
                    <label for="data" class="form-label">Data</label>
                    <i class="bi bi-calendar3"></i>
                    <input type="date" id="data" th:field="*{data}" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="situacao" class="form-label">Situação</label>
                    <select id="situacao" th:field="*{ativo}" class="form-select" required>
                        <option value="true">Aberto</option>
                        <option value="false">Fechado</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="aviso" class="form-label">Aviso</label>
                    <textarea id="aviso" th:field="*{texto}" class="form-control" placeholder="Digite aqui..." required></textarea>
                </div>

                <button type="submit" class="btn-confirm">Confirmar</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
          const dataInput = document.getElementById('data');
          if (dataInput.value) return;
          const hoje = new Date();
          const ano = hoje.getFullYear();
          const mes = String(hoje.getMonth() + 1).padStart(2, '0');
          const dia = String(hoje.getDate()).padStart(2, '0');
          dataInput.value = `${ano}-${mes}-${dia}`;
        });
    </script>
</section>
</html>