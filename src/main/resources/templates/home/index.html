<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="#{home.titulo}">VISITA BRENNAND</title>

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
          --color-brand: #294A5D;
          --color-accent: #A7532C;
          --color-text-primary: #1A202C;
          --color-text-secondary: #718096;
          --color-surface: #F7FAFC;
          --color-background: #FFFFFF;
          --color-border: #EDF2F7;
          --color-success-bg: #F0FFF4;
          --color-success-icon: #38A169;
          --color-warning-bg: #FFFBEB;
          --color-warning-icon: #D69E2E;
        }

        body {
          background-color: var(--color-surface);
          font-family: 'Inter', system-ui, -apple-system, sans-serif;
          color: var(--color-text-primary);
          line-height: 1.6;
          margin: 0;
        }

        /* ===== Banner médio (ajustado p/ desktop) ===== */
        .hero-bleed {
          width: 100%;
          height: clamp(280px, 40vh, 420px); /* antes: clamp(240px, 32vh, 360px) */
          display: grid;
          place-items: center;
          overflow: hidden;
          background: var(--color-surface);
          position: relative;
        }

        .hero-bleed::before,
        .hero-bleed::after {
          content: "";
          position: absolute;
          left: 0;
          right: 0;
          height: 25px;
          pointer-events: none;
        }

        .hero-bleed::before {
          top: 0;
          background: linear-gradient(to bottom, rgba(0, 0, 0, 0.08), transparent);
        }

        .hero-bleed::after {
          bottom: 0;
          background: linear-gradient(to top, rgba(0, 0, 0, 0.08), transparent);
        }

        .hero-bleed img {
          max-width: 100%;
          max-height: 100%;
          width: auto;
          height: auto;
          object-fit: contain;   /* Mostra toda a imagem */
          object-position: center;
          display: block;
        }

        /* ===== Conteúdo principal ===== */
        .wrap {
          max-width: 1100px;
          margin: auto;
          padding: 2rem 1rem;
        }

        .card-ui {
          background-color: var(--color-background);
          border: 1px solid var(--color-border);
          border-radius: 16px;
          padding: 1.5rem;
          margin-bottom: 1.5rem;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05),
                      0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .section-title {
          font-size: 1rem;
          font-weight: 600;
          color: var(--color-text-primary);
          margin-bottom: 1rem;
          padding-bottom: 1rem;
          border-bottom: 1px solid var(--color-border);
          display: block;
        }

        .status-banner {
          display: flex;
          align-items: flex-start;
          gap: 1rem;
          border-radius: 12px;
          padding: 1.25rem;
          border: 1px solid transparent;
        }

        .status-banner__icon {
          flex-shrink: 0;
          width: 24px;
          height: 24px;
          margin-top: 2px;
        }

        .status-banner__content p {
          margin: 0;
          color: var(--color-text-secondary);
          font-size: 0.9rem;
        }

        .status-banner__content strong {
          color: var(--color-text-primary);
        }

        .status-banner--success {
          background-color: var(--color-success-bg);
          border-color: #C6F6D5;
        }

        .status-banner--warning {
          background-color: var(--color-warning-bg);
          border-color: #FEEBC8;
        }

        .calendar-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
        }

        .calendar-pills {
          display: flex;
          gap: 0.5rem;
          justify-content: center;
          align-items: center;
        }

        .pill {
          border: 1px solid var(--color-border);
          border-radius: 10px;
          padding: .5rem;
          font-weight: 600;
          text-align: center;
          width: 55px;
          cursor: pointer;
          transition: all 0.2s ease-in-out;
        }

        .pill--today {
          background-color: var(--color-brand);
          color: #fff;
          border-color: var(--color-brand);
        }

        .calendar-arrow {
          font-size: 1.5rem;
          color: var(--color-text-secondary);
          cursor: pointer;
          padding: 0 0.5rem;
        }

        .lang-switcher-container .dropdown-toggle {
          background-color: var(--color-surface);
          border-color: var(--color-border);
        }

        .lang-switcher-container img {
          width: 20px;
          border-radius: 2px;
        }

        .form-label {
          font-size: 0.875rem;
          font-weight: 500;
        }

        .form-control {
          border-radius: 8px;
          border-color: var(--color-border);
        }

        .form-control:focus {
          border-color: var(--color-brand);
          box-shadow: 0 0 0 3px rgba(41, 74, 93, .1);
        }

        .star input {
          position: absolute;
          opacity: 0;
          width: 0;
          height: 0;
          pointer-events: none;
        }

        .star label {
          font-size: 2rem;
          color: #E2E8F0;
          transition: color 0.2s;
          cursor: pointer;
        }

        .star input:checked ~ label,
        .star label:hover,
        .star label:hover ~ label {
          color: #FBBF24;
        }

        .btn-brand {
          background-color: var(--color-accent);
          border-color: var(--color-accent);
          color: #fff;
          font-weight: 600;
          border-radius: 8px;
          padding: 0.75rem 1.5rem;
        }

        .bottom-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1.5rem;
        }

        @media (max-width: 768px) {
          .wrap { padding: 1rem 0; }
          .card-ui, .status-banner {
            margin-bottom: 1rem;
            border-radius: 0;
            border-left: 0;
            border-right: 0;
          }
          .calendar-header { flex-direction: column; align-items: stretch; gap: 1rem; }
          .pill:nth-of-type(1), .pill:nth-of-type(7) { display: none; }
          .bottom-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- Banner médio e sem cortes -->
<section class="hero-bleed" aria-label="Banner do parque">
    <picture>
        <!-- Mobile -->
        <source media="(max-width: 768px)" th:srcset="@{/img/banner_mobile.png}" srcset="/img/banner_mobile.png">
        <!-- Desktop -->
        <img th:src="@{/img/banner_desktop.png}" src="/img/banner_desktop.png" alt="Banner Visita Brennand">
    </picture>
</section>

<div class="wrap">
    <main>
        <section class="card-ui">
            <div class="calendar-header">
                <h5 class="fw-bold mb-0" th:text="${nomeMes}"></h5>
                <div class="lang-switcher-container dropdown">
                    <button class="btn dropdown-toggle btn-sm d-flex align-items-center" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <th:block th:if="${#locale.language == 'en'}">
                            <img src="https://flagcdn.com/w20/us.png" alt="USA Flag" class="me-2"><span>English</span>
                        </th:block>
                        <th:block th:unless="${#locale.language == 'en'}">
                            <img src="https://flagcdn.com/w20/br.png" alt="Bandeira do Brasil" class="me-2"><span>Português</span>
                        </th:block>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item d-flex align-items-center" href="?lang=pt"><img src="https://flagcdn.com/w20/br.png" class="me-2" alt=""><span>Português</span></a></li>
                        <li><a class="dropdown-item d-flex align-items-center" href="?lang=en"><img src="https://flagcdn.com/w20/us.png" class="me-2" alt=""><span>English</span></a></li>
                    </ul>
                </div>
            </div>

            <div class="calendar-pills">
                <span class="calendar-arrow" aria-label="Anterior">&lt;</span>
                <th:block th:each="dia : ${dias}">
                    <div th:class="${dia.isEqual(hoje)} ? 'pill pill--today' : 'pill'">
                        <div class="small" th:text="${#strings.capitalize(#temporals.format(dia, 'E', #locale.forLanguageTag('pt-BR')))}"></div>
                        <strong class="fs-5" th:text="${#temporals.format(dia, 'dd')}"></strong>
                        <div th:if="${dia.isEqual(hoje)}" class="small" style="font-weight:500;font-size:.65rem;margin-top:2px;">HOJE</div>
                    </div>
                </th:block>
                <span class="calendar-arrow" aria-label="Próximo">&gt;</span>
            </div>
        </section>

        <div th:if="${!#lists.isEmpty(avisos)}" class="status-banner status-banner--warning">
            <div class="status-banner__icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                </svg>
            </div>
            <div class="status-banner__content">
                <strong th:utext="${avisos.get(0).texto}"></strong>
                <p class="mt-1">O funcionamento do parque foi alterado. Por favor, leia o aviso.</p>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(avisos)}" class="status-banner status-banner--success">
            <div class="status-banner__icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div class="status-banner__content">
                <strong>Parque Aberto</strong>
                <p th:text="#{home.aviso.parque_aberto}"></p>
            </div>
        </div>

        <section class="card-ui">
            <h5 class="section-title" th:text="#{home.horarios}"></h5>
            <div class="row">
                <div class="col-sm-6">
                    <p class="mb-1"><strong>Terça a Sexta-feira</strong><br><span class="text-muted">(09:00 às 16:00)</span></p>
                </div>
                <div class="col-sm-6">
                    <p class="mb-0"><strong>Sábado e Domingo</strong><br><span class="text-muted">(08:00 às 16:00)</span></p>
                </div>
            </div>
        </section>

        <section class="bottom-grid">
            <div class="card-ui">
                <h5 class="section-title" th:text="#{home.regras}"></h5>
                <ul class="mb-0 ps-3 text-secondary">
                    <li>Crianças com responsáveis</li>
                    <li>Jogue lixo nas lixeiras</li>
                    <li>Proibido fumar</li>
                    <li>Sem drones</li>
                </ul>
            </div>

            <div class="card-ui">
                <form method="post" th:action="@{/feedback}" th:object="${feedback}">
                    <h5 class="section-title text-center" th:text="#{home.feedback}"></h5>
                    <input th:if="${_csrf}" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <div class="star d-flex flex-row-reverse justify-content-center mb-3">
                        <input type="radio" id="s5" name="nota" value="5" required/><label for="s5">★</label>
                        <input type="radio" id="s4" name="nota" value="4"/><label for="s4">★</label>
                        <input type="radio" id="s3" name="nota" value="3"/><label for="s3">★</label>
                        <input type="radio" id="s2" name="nota" value="2"/><label for="s2">★</label>
                        <input type="radio" id="s1" name="nota" value="1"/><label for="s1">★</label>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="fb-coment" th:text="#{home.comentario}"></label>
                        <textarea id="fb-coment" th:field="*{comentario}" class="form-control" rows="4" placeholder="Deixe seu comentário..." required></textarea>
                    </div>
                    <button class="btn btn-brand w-100" type="submit" th:text="#{home.enviar}"></button>
                </form>
            </div>
        </section>

        <div class="mt-3">
            <div class="alert alert-success" th:if="${ok}" th:text="#{${ok}}" role="alert"></div>
            <div class="alert alert-danger" th:if="${erro}" th:text="#{${erro}}" role="alert"></div>
        </div>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
